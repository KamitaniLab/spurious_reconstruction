# UMAP visualization analysis

This directory contains the scripts for performing UMAP visualization, corresponding to Figure 4 in the main text. You can follow the instructions below and reproduce the figures and results.

## Prerequisites

Before running the reconstruction scripts, you need to prepare several files, including the extracted feature files. These files can be downloaded using the provided download scripts.

```
python ./download.py "UMAP visualization analysis"
```

## Reproducing Figure 4A

To project the CLIP text features of the NSD dataset into the UMAP embedding space, run the following command:

```
python ./analysis/1_case_study/dataset-analysis/umap_transform_nsd_text_features.py
```
Alternatively you can download the pre-computed results:

```
python ./download.py "UMAP visualization results"
```

Figure can be generated by running:
```
python ./analysis/1_case_study/dataset-analysis/Figure_UMAP_NSD_clustering_parameeters.py
```

## Reproducing S1 Fig
To project the CLIP text features of the NSD dataset into the UMAP embedding space using default UMAP parameters, run the following command:
```
python ./analysis/1_case_study/dataset-analysis/umap_transform_nsd_text_features_default_param.py
```
Then, the figure can be generated by:
```
python ./analysis/1_case_study/dataset-analysis/Figure_UMAP_NSD_default_parameeters.py
```


## Reproducing S2 Fig
To project the CLIP text features of the Deeprecon dataset into the UMAP embedding space using default UMAP parameters, run the following command:
```
python ./analysis/1_case_study/dataset-analysis/umap_transform_deeprecon_text_features.py
```
Then, the figure can be generated by:
```
python ./analysis/1_case_study/dataset-analysis/Figure_UMAP_Deeprecon_clustering_parameeters.py
```


## Reproducing S3 FigA
To reproduce the k-Means clustering results, you can run these commands after getting embedding results:

```
python ./analysis/1_case_study/dataset-analysis/Figure_k-Means_clustering_in_UMAP_space.py
```